<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragmento :: head('Lançamentos - Listar') }">
<meta name="viewport" content="width=device-width">
<meta charset="UTF-8">
<title>Lançamentos</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
	<!-- Nav Bar -->
	<nav th:replace="~{navfragment:: nav }"></nav>
	<div class="containe mt-2">
		<div class="row">
			<div class="col">


				<a href="/" class="btn btn-success">Home <svg
						xmlns="http://www.w3.org/2000/svg" width="25" height="25"
						fill="currentColor" class="bi bi-house-door" viewBox="0 0 16 16">
										 				 <path
							d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z" />
												</svg>
				</a> <a href="/lancamento/cadastro" class="btn btn-primary">Cadastro
					<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
						fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
												  <path
							d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
												  <path
							d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
											</svg>
				</a> <a href="/relatorio/imprimir/"
					th:href="@{/relatorio/imprimir/(nmrelatorio='relatoriodacompetencia',acao='v')}"
					class="btn btn-danger"> Relatório <svg
						xmlns="http://www.w3.org/2000/svg" width="25" height="25"
						fill="currentColor" class="bi bi-filetype-pdf" viewBox="0 0 16 16">
													  <path fill-rule="evenodd"
							d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM1.6 11.85H0v3.999h.791v-1.342h.803c.287 0 .531-.057.732-.173.203-.117.358-.275.463-.474a1.42 1.42 0 0 0 .161-.677c0-.25-.053-.476-.158-.677a1.176 1.176 0 0 0-.46-.477c-.2-.12-.443-.179-.732-.179Zm.545 1.333a.795.795 0 0 1-.085.38.574.574 0 0 1-.238.241.794.794 0 0 1-.375.082H.788V12.48h.66c.218 0 .389.06.512.181.123.122.185.296.185.522Zm1.217-1.333v3.999h1.46c.401 0 .734-.08.998-.237a1.45 1.45 0 0 0 .595-.689c.13-.3.196-.662.196-1.084 0-.42-.065-.778-.196-1.075a1.426 1.426 0 0 0-.589-.68c-.264-.156-.599-.234-1.005-.234H3.362Zm.791.645h.563c.248 0 .45.05.609.152a.89.89 0 0 1 .354.454c.079.201.118.452.118.753a2.3 2.3 0 0 1-.068.592 1.14 1.14 0 0 1-.196.422.8.8 0 0 1-.334.252 1.298 1.298 0 0 1-.483.082h-.563v-2.707Zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638H7.896Z" />
													</svg>
				</a> <a href="/lotecontabil/processar" class="btn btn-warning"
					th:if="${status=='A'}">Processar Fechamento Contábil <svg
						xmlns="http://www.w3.org/2000/svg" width="25" height="25"
						fill="currentColor" class="bi bi-boxes" viewBox="0 0 16 16">
										  <path
							d="M7.752.066a.5.5 0 0 1 .496 0l3.75 2.143a.5.5 0 0 1 .252.434v3.995l3.498 2A.5.5 0 0 1 16 9.07v4.286a.5.5 0 0 1-.252.434l-3.75 2.143a.5.5 0 0 1-.496 0l-3.502-2-3.502 2.001a.5.5 0 0 1-.496 0l-3.75-2.143A.5.5 0 0 1 0 13.357V9.071a.5.5 0 0 1 .252-.434L3.75 6.638V2.643a.5.5 0 0 1 .252-.434L7.752.066ZM4.25 7.504 1.508 9.071l2.742 1.567 2.742-1.567L4.25 7.504ZM7.5 9.933l-2.75 1.571v3.134l2.75-1.571V9.933Zm1 3.134 2.75 1.571v-3.134L8.5 9.933v3.134Zm.508-3.996 2.742 1.567 2.742-1.567-2.742-1.567-2.742 1.567Zm2.242-2.433V3.504L8.5 5.076V8.21l2.75-1.572ZM7.5 8.21V5.076L4.75 3.504v3.134L7.5 8.21ZM5.258 2.643 8 4.21l2.742-1.567L8 1.076 5.258 2.643ZM15 9.933l-2.75 1.571v3.134L15 13.067V9.933ZM3.75 14.638v-3.134L1 9.933v3.134l2.75 1.571Z" />
										</svg>
				</a> <a href="/lotecontabil/processar" class="btn btn-warning disabled"
					th:if="${status=='F'}">Processar Fechamento Contábil <svg
						xmlns="http://www.w3.org/2000/svg" width="25" height="25"
						fill="currentColor" class="bi bi-boxes" viewBox="0 0 16 16">
										  <path
							d="M7.752.066a.5.5 0 0 1 .496 0l3.75 2.143a.5.5 0 0 1 .252.434v3.995l3.498 2A.5.5 0 0 1 16 9.07v4.286a.5.5 0 0 1-.252.434l-3.75 2.143a.5.5 0 0 1-.496 0l-3.502-2-3.502 2.001a.5.5 0 0 1-.496 0l-3.75-2.143A.5.5 0 0 1 0 13.357V9.071a.5.5 0 0 1 .252-.434L3.75 6.638V2.643a.5.5 0 0 1 .252-.434L7.752.066ZM4.25 7.504 1.508 9.071l2.742 1.567 2.742-1.567L4.25 7.504ZM7.5 9.933l-2.75 1.571v3.134l2.75-1.571V9.933Zm1 3.134 2.75 1.571v-3.134L8.5 9.933v3.134Zm.508-3.996 2.742 1.567 2.742-1.567-2.742-1.567-2.742 1.567Zm2.242-2.433V3.504L8.5 5.076V8.21l2.75-1.572ZM7.5 8.21V5.076L4.75 3.504v3.134L7.5 8.21ZM5.258 2.643 8 4.21l2.742-1.567L8 1.076 5.258 2.643ZM15 9.933l-2.75 1.571v3.134L15 13.067V9.933ZM3.75 14.638v-3.134L1 9.933v3.134l2.75 1.571Z" />
										</svg>
				</a> <a href="/lancamento/pagartodos" class="btn btn-warning">Pagar
					Todos <svg xmlns="http://www.w3.org/2000/svg" width="25"
						height="25" fill="currentColor" class="bi bi-coin"
						viewBox="0 0 16 16">
													  <path
							d="M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9H5.5zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518l.087.02z" />
													  <path
							d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
													  <path
							d="M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12z" />
													</svg>
				</a> <a class="btn btn-success" style="color: white;"
					href="/lancamento/relxlscompetencia">Gerar Planilha <svg
						xmlns="http://www.w3.org/2000/svg" width="25" height="25"
						fill="currentColor" class="bi bi-file-earmark-excel"
						viewBox="0 0 16 16">
															  <path
							d="M5.884 6.68a.5.5 0 1 0-.768.64L7.349 10l-2.233 2.68a.5.5 0 0 0 .768.64L8 10.781l2.116 2.54a.5.5 0 0 0 .768-.641L8.651 10l2.233-2.68a.5.5 0 0 0-.768-.64L8 9.219l-2.116-2.54z" />
															  <path
							d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
															</svg>
				</a>
		</div>		
		<!-- Fim da row -->
		<div class="row mt-2 mb-2">
					<div class="col">
					<table>
								<tr>
										<td>
												<form method="post" action="/chaves/alterar/SN_PROXIMA_COMPETENCIA">
														<button th:if="${proximacompetencia=='N'}" class="btn btn-primary"
															type="submit">Próxima Competência >></button>
														<button th:if="${proximacompetencia=='S'}" class="btn btn-primary"
															type="submit"><< Competência Anterior</button>
													</form>		
										</td>
										<td>
											<div class="dropdown">											
												<a class="btn btn-secondary dropdown-toggle" href="#" role="button"
													id="dropdownMenuLink" data-bs-toggle="dropdown"
													aria-expanded="false">Filtros 
													<svg xmlns="http://www.w3.org/2000/svg" width="25"
															height="25" fill="currentColor" class="bi bi-coin"
															viewBox="0 0 16 16">
																						  <path
																d="M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9H5.5zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518l.087.02z" />
																						  <path
																d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
																						  <path
																d="M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12z" />
													</svg>
													
													</a>
												<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
													<li><a class="dropdown-item" href="/chaves/alterar/FIXA_LANCAMENTO/T"> Mostrat todos</a></li>
													<li><a class="dropdown-item" href="/chaves/alterar/FIXA_LANCAMENTO/C"> Fixar lançamentos no Crédito</a></li>
													<li><a class="dropdown-item" href="/chaves/alterar/FIXA_LANCAMENTO/D">Fixar lancamentos no Débito</a></li>
													<li><a class="dropdown-item" href="/chaves/alterar/FIXA_LANCAMENTO/DI">Fixar lancamentos no Dinheiro</a></li>
												</ul>
												
										</div>	
										</td>
								</tr>
					</table>
								
					</div>				
			</div>
	</div>
	<div class="card">
		<div class="card-header">Lançamentosx</div>
		<div class="card-body">
			<table class="table table-striped table-hover" id="lancamentos">
				<thead>
					<tr>
						<th scope="col">Código</th>
						<th scope="col">Descrição</th>
						<th scope="col">Vencimento</th>
						<th scope="col">Pago</th>
						<th scope="col">Valor</th>
						<th scope="col">Forma de Pagamento</th>
						<th scope="col">Cartão</th>
						<th scope="col">Tipo de Lançamento</th>
						<th scope="col">Detalhe</th>
						<th scope="col">Ação</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="lancamento : ${lancamentos}">
						<th scope="row" th:text="${lancamento.cdLancamento}">-</th>
						<td th:text="${lancamento.dsLancamento}"></td>

						<!-- <td th:text="${#temporals.format(lancamento.dtCadastro, 'dd/MM/yyyy')}"> -->
						<td
							th:text="${#temporals.format(lancamento.dtCompetencia, 'dd/MM/yyyy')}"></td>
						<td th:if="${lancamento.snPago}=='SIM'"
							th:text="${lancamento.snPago}">-</td>
						<td th:if="${lancamento.snPago}=='Não'"><a
							href="/lancamento/pagar/"
							th:href="@{'/lancamento/pagar/'  + ${lancamento.cdLancamento}}"
							class="btn btn-success">Pagar</a> <a
							href="/lancamento/transfetir/"
							th:href="@{'/lancamento/transferir/' + ${lancamento.cdLancamento}}"
							class="btn btn-link" data-toggle="tooltip" data-placement="top"
							title="Transferir para próxima conpetência"> <svg
									xmlns="http://www.w3.org/2000/svg" width="35" height="35"
									fill="currentColor" class="bi bi-sign-turn-slight-right-fill"
									viewBox="0 0 16 16">
								  <path fill-rule="evenodd"
										d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.482 1.482 0 0 1 0-2.098L6.95.435Zm1.385 6.547.8 1.386a.25.25 0 0 0 .451-.039l1.06-2.882a.25.25 0 0 0-.192-.333l-3.026-.523a.25.25 0 0 0-.26.371l.667 1.154-.621.373A2.5 2.5 0 0 0 6 8.632V11h1V8.632a1.5 1.5 0 0 1 .728-1.286l.607-.364Z" />
								</svg></a></td>
						<td
							th:text="${#numbers.formatDecimal(lancamento.vlPago,1,2,'COMMA')}"></td>
						<td th:text="${lancamento.formaDePagamento.descricao}"></td>
						<td th:if="${lancamento.cartao.cdCartao}!=null"><img alt=""
							width="40px" height="40px"
							th:src="|/cartao/getimagem/${lancamento.cartao.cdCartao}|" /></td>
						<td th:text="${lancamento.tipoLancamento.dsTipoLancamento}">-</td>
						<!-- <td th:text="${lancamento.usuario.login}">-</td> -->
						<td><a href="/lancamento/detalhe/"
							th:href="@{'/lancamento/detalhe/' +  ${lancamento.cdLancamento}}"
							target="_blank" class="btn btn-link"> <svg
									xmlns="http://www.w3.org/2000/svg" width="32" height="32"
									fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
									  <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z" />
									  <path
										d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" />
								</svg>
						</a></td>
						<td><a href="/lancamento/excluir/"
							th:href="@{'/lancamento/excluir/'  + ${lancamento.cdLancamento}}"
							class="btn btn-danger">Excluir</a> <a href="/lancamento/alterar/"
							th:href="@{'/lancamento/alterar/'  + ${lancamento.cdLancamento}}"
							class="btn btn-warning">Alterar</a> <a href="/lancamento/anexar"
							th:if="${lancamento.dsAnexo==null}"
							th:href="@{'/lancamento/anexar/'  + ${lancamento.cdLancamento}}"
							class="btn btn-secondary">Anexar</a> <a href="/lancamento/anexo/"
							th:href="@{'/lancamento/anexo/'  + ${lancamento.cdLancamento}}"
							th:if="${lancamento.dsAnexo!=null}" class="btn btn-success"
							th:alt="teste" target="_blank"><span
								data-feather="paperclip"></span></a></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<th></th>
						<th></th>
						<th></th>
						<th align="right">Crédito R$</th>
						<th th:text=" ${totalcredito} " style="align-items: right;"></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
					<tr>
						<th></th>
						<th></th>
						<th></th>
						<th align="right">Débito R$</th>
						<th th:text=" ${totaldebito} " style="align-items: right;"></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
					<tr>
						<th></th>
						<th></th>
						<th></th>
						<th align="right">Dinheiro R$</th>
						<th th:text=" ${totaldinheiro} " style="align-items: right;"></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
					<tr>
						<th></th>
						<th></th>
						<th></th>
						<th align="right">Total Geral</th>
						<th
							th:text="${#numbers.formatDecimal(#aggregates.sum(lancamentos.![vlPago]),1,2,'COMMA')}"
							style="align-items: right;"></th>
						</th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
	<!-- Paginação -->
	<script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>

	<script>
		$(document)
				.ready(
						function() {
							$('#lancamentos')
									.DataTable(
											{
												language : {
													url : '//cdn.datatables.net/plug-ins/1.13.4/i18n/pt-BR.json'
												}
											});
						});
	</script>
	<!-- Script necessário para o funcionamento da NavBar-->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
	<!-- Necessário para execição dos ícones feather-->
	<script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
	<script>
		feather.replace()
	</script>

</body>
</html>