<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
 <head th:replace="~{fragmento :: head('Logs - Lista') }">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<!-- Nav Bar -->
    <nav th:replace="~{navfragment:: nav }"></nav>
	<div class="row">
		<div style="text-align: center;">
			<h3 th:text="${competencia}"  >Relatório de Despesas - Competência</h3>
		</div>
		<div class="col-6 ml-5">
				<label class="form-text">Competência</label>
		</div>
		
	</div>
	
	<div class="col-2 mb-3 ml-5" >
		<form action="/extrato/financeiro/">
			<select class="form-select " id="meses">
					<option value="0">Nenhum</option>
					<option value="01">Janeiro</option>
					<option value="02">Fevereiro</option>
					<option value="03">Março</option>
					<option value="04">Abril</option>
					<option value="05">Maio</option>
					<option value="06">Junho</option>
					<option value="07">Julho</option>
					<option value="08">Agosto</option>
					<option value="09">Setembro</option>
					<option value="10">Outubro</option>
					<option value="11">Novembro</option>
					<option value="12">Dezembro</option>				
			</select>
		</form>
		<div class="5 mt-1">
			<button class="btn btn-primary" onclick="window.print()">Imprimir</button>
		</div>					
	</div>
	<div class="row">
		<div class="col-12">
			<table class="table table-striped table-hover" id="lancamentos">
			<thead>
						<th scope="col" >Código</th>
						<th scope="col">Descrição</th>
						<th scope="col" >Valor</th>
						<th scope="col" >Forma de Pagamento</th>
						<th scope="col" >Tipo de Lançamento</th>											
				</thead>
				<tbody>
					<tr th:each="lancamento : ${lcto}">
						<td th:text="${lancamento.cdLancamento}"></td>
						<td th:text="${lancamento.dsLancamento}"></td>
						<td th:text="${lancamento.vlPago}"></td>
						<td th:text="${lancamento.formaDePagamento.descricao}"></td>
						<td th:text="${lancamento.tipoLancamento.dsTipoLancamento}"></td>
					</tr>
				</tbody>
			</table>
		</div>
		
		
	</div>
	<div class="row">
	<div class="col-12">
			<table class="table table-striped table-hover" id="categorias" width="80%">
				
				<th>Despesa por Categoria</th>
				<tr>
					<td th:each="totalizacao : ${totalizacao}" th:text="${totalizacao}"></td>
				</tr>
				<tr >						
					<td th:each="valores : ${valores}" th:text="${valores}"></td>				
				</tr>
								
			</table>
		</div> 
		<div id="grupoDespesa" style="width:50%;height:500 px;"></div>	
		
</div>
</script>
 	 <!-- Script necessário para o funcionamento da NavBar-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<!-- Necessário para execução dos ícones feather-->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
	<script>
      feather.replace()
   </script>
   <!-- Seletor -->
    <script>
		$('#meses').change(function() {
		    window.location = $(this).val();
		});
	</script>
	<!-- Grupo de Despesas -->
<script th:inline="javascript">
	var keyvalor=[[${grupovalues}]];
	var keygrupos=[[${keygrupodespesa}]];
	var ano=[[${ano}]]
	Highcharts.chart('grupoDespesa', {
	    chart: {
	        type: 'bar'
	    },
	    title: {
	        text: 'Totalização por tipo de Despesas'
	    },
	    subtitle: {
	        text: 'Despesas da Competência'
	    },
	    xAxis: {
	        categories: keygrupos,
	        title: {
	            text: null
	        }
	    },
	    yAxis: {
	        min: 0,
	        title: {
	            text: 'Despesas (R$)',
	            align: 'high'
	        },
	        labels: {
	            overflow: 'justify'
	        }
	    },
	    tooltip: {
	        valueSuffix: ' milhares '
	    },
	    plotOptions: {
	        bar: {
	            dataLabels: {
	                enabled: true
	            }
	        }
	    },
	    legend: {
	        layout: 'vertical',
	        align: 'right',
	        verticalAlign: 'top',
	        x: -40,
	        y: 80,
	        floating: true,
	        borderWidth: 1,
	        backgroundColor:
	            Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF',
	        shadow: true
	    },
	    credits: {
	        enabled: false
	    },
	    series: [{
	        name: ano,
	        data: keyvalor
	    
	    }]
	});

</script>
<!-- Fim  do  -->
</body>
</html>